{"version":3,"file":"tooltip.js","sources":["components/tooltip.js"],"sourcesContent":["import { GenerateGuid } from \"../helpers/strings.js\";\nimport { KeyCodes } from \"../helpers/key-codes.js\";\n\nclass Tooltip {\n  constructor($module) {\n    this.$module = $module;\n    this.$trigger = $module.firstElementChild;\n    this.$tooltip = $module.querySelector(\".fs-tooltip__tip\");\n    this.timeoutId = null;\n    this.timeoutLength = 500; // milliseconds\n    this.tooltipOriginalId = this.$tooltip.id;\n    this.tooltipId = this.tooltipOriginalId || `tooltip-${GenerateGuid()}`;\n    // There's no tooltip, exit\n    if (!this.$trigger || !this.$tooltip) {\n      return;\n    }\n    this.create();\n  }\n  create() {\n    // Tooltip a11y\n    this.$tooltip.setAttribute(\"id\", this.tooltipId);\n    this.$tooltip.setAttribute(\"aria-hidden\", \"true\");\n    // Trigger events\n    this.$trigger.boundMouseEnter = this.onFocus.bind(this);\n    this.$trigger.boundMouseLeave = this.onMouseLeave.bind(this);\n    this.$trigger.boundFocus = this.onFocus.bind(this);\n    this.$trigger.boundBlur = this.onBlur.bind(this);\n    this.$trigger.boundEscape = this.onEscape.bind(this);\n    this.$trigger.addEventListener(\n      \"mouseenter\",\n      this.$trigger.boundMouseEnter,\n      true\n    );\n    this.$trigger.addEventListener(\n      \"mouseleave\",\n      this.$trigger.boundMouseLeave,\n      true\n    );\n    this.$trigger.addEventListener(\"focus\", this.$trigger.boundFocus, true);\n    this.$trigger.addEventListener(\"blur\", this.$trigger.boundBlur, true);\n    this.$trigger.addEventListener(\"keydown\", this.$trigger.boundEscape, true);\n    this.hideTooltip();\n  }\n  destroy() {\n    if (this.tooltipOriginalId) {\n      this.$tooltip.setAttribute(\"id\", this.tooltipOriginalId);\n    } else {\n      this.$tooltip.removeAttribute(\"id\");\n    }\n    this.$tooltip.removeAttribute(\"aria-hidden\");\n    this.$trigger.removeEventListener(\n      \"mouseenter\",\n      this.$trigger.boundMouseEnter,\n      true\n    );\n    this.$trigger.removeEventListener(\n      \"mouseleave\",\n      this.$trigger.boundMouseLeave,\n      true\n    );\n    this.$trigger.removeEventListener(\"focus\", this.$trigger.boundFocus, true);\n    this.$trigger.removeEventListener(\"blur\", this.$trigger.boundBlur, true);\n    this.$trigger.removeEventListener(\n      \"keydown\",\n      this.$trigger.boundEscape,\n      true\n    );\n  }\n  onFocus() {\n    this.showTooltip();\n  }\n  onBlur() {\n    this.hideTooltip();\n  }\n  onEscape(e) {\n    const code = e.which || e.keyCode;\n    if (code === KeyCodes().ESCAPE) {\n      this.hideTooltip();\n    }\n  }\n  onMouseEnter() {\n    this.showTooltip();\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n  }\n  onMouseLeave() {\n    this.timeoutId = setTimeout(() => {\n      this.hideTooltip();\n    }, this.timeoutLength);\n  }\n  showTooltip() {\n    this.determinePosition();\n    this.$tooltip.classList.remove(\"fs-tooltip__tip--hidden\");\n    this.$tooltip.setAttribute(\"aria-hidden\", \"false\");\n  }\n  hideTooltip() {\n    this.$tooltip.classList.add(\"fs-tooltip__tip--hidden\");\n    this.$tooltip.setAttribute(\"aria-hidden\", \"true\");\n  }\n  determinePosition() {\n    // Calculate element positions\n    const rect = this.$trigger.getBoundingClientRect();\n    const spaceAvailable = {\n      top: rect.top,\n      left: rect.left,\n      right: window.innerWidth - rect.right,\n      bottom: window.innerHeight - rect.bottom,\n    };\n    // Iterate though the results to find where we have the most space\n    let largestVal = 0;\n    let largestKey = null;\n    Object.keys(spaceAvailable).map((key) => {\n      if (spaceAvailable[key] > largestVal) {\n        largestVal = spaceAvailable[key];\n        largestKey = key;\n      }\n    });\n    this.$tooltip.dataset.side = largestKey || \"bottom\";\n  }\n}\n\nexport default Tooltip;\n"],"names":["GenerateGuid","KeyCodes","Tooltip","constructor","$module","this","$trigger","firstElementChild","$tooltip","querySelector","timeoutId","timeoutLength","tooltipOriginalId","id","tooltipId","create","setAttribute","boundMouseEnter","onFocus","bind","boundMouseLeave","onMouseLeave","boundFocus","boundBlur","onBlur","boundEscape","onEscape","addEventListener","hideTooltip","destroy","removeAttribute","removeEventListener","showTooltip","e","which","keyCode","ESCAPE","onMouseEnter","clearTimeout","setTimeout","determinePosition","classList","remove","add","rect","getBoundingClientRect","spaceAvailable","top","left","right","window","innerWidth","bottom","innerHeight","largestVal","largestKey","Object","keys","map","key","dataset","side"],"mappings":"OAASA,gDACAC,6CAEHC,QACJC,YAAYC,GACVC,KAAKD,QAAUA,EACfC,KAAKC,SAAWF,EAAQG,kBACxBF,KAAKG,SAAWJ,EAAQK,cAAc,oBACtCJ,KAAKK,UAAY,KACjBL,KAAKM,cAAgB,IACrBN,KAAKO,kBAAoBP,KAAKG,SAASK,GACvCR,KAAKS,UAAYT,KAAKO,8BAAgCZ,iBAEjDK,KAAKC,UAAaD,KAAKG,UAG5BH,KAAKU,SAEPA,SAEEV,KAAKG,SAASQ,aAAa,KAAMX,KAAKS,WACtCT,KAAKG,SAASQ,aAAa,cAAe,QAE1CX,KAAKC,SAASW,gBAAkBZ,KAAKa,QAAQC,KAAKd,MAClDA,KAAKC,SAASc,gBAAkBf,KAAKgB,aAAaF,KAAKd,MACvDA,KAAKC,SAASgB,WAAajB,KAAKa,QAAQC,KAAKd,MAC7CA,KAAKC,SAASiB,UAAYlB,KAAKmB,OAAOL,KAAKd,MAC3CA,KAAKC,SAASmB,YAAcpB,KAAKqB,SAASP,KAAKd,MAC/CA,KAAKC,SAASqB,iBACZ,aACAtB,KAAKC,SAASW,iBACd,GAEFZ,KAAKC,SAASqB,iBACZ,aACAtB,KAAKC,SAASc,iBACd,GAEFf,KAAKC,SAASqB,iBAAiB,QAAStB,KAAKC,SAASgB,YAAY,GAClEjB,KAAKC,SAASqB,iBAAiB,OAAQtB,KAAKC,SAASiB,WAAW,GAChElB,KAAKC,SAASqB,iBAAiB,UAAWtB,KAAKC,SAASmB,aAAa,GACrEpB,KAAKuB,cAEPC,UACMxB,KAAKO,kBACPP,KAAKG,SAASQ,aAAa,KAAMX,KAAKO,mBAEtCP,KAAKG,SAASsB,gBAAgB,MAEhCzB,KAAKG,SAASsB,gBAAgB,eAC9BzB,KAAKC,SAASyB,oBACZ,aACA1B,KAAKC,SAASW,iBACd,GAEFZ,KAAKC,SAASyB,oBACZ,aACA1B,KAAKC,SAASc,iBACd,GAEFf,KAAKC,SAASyB,oBAAoB,QAAS1B,KAAKC,SAASgB,YAAY,GACrEjB,KAAKC,SAASyB,oBAAoB,OAAQ1B,KAAKC,SAASiB,WAAW,GACnElB,KAAKC,SAASyB,oBACZ,UACA1B,KAAKC,SAASmB,aACd,GAGJP,UACEb,KAAK2B,cAEPR,SACEnB,KAAKuB,cAEPF,SAASO,IACMA,EAAEC,OAASD,EAAEE,WACblC,WAAWmC,QACtB/B,KAAKuB,cAGTS,eACEhC,KAAK2B,cACD3B,KAAKK,WACP4B,aAAajC,KAAKK,WAGtBW,eACEhB,KAAKK,UAAY6B,WAAW,KAC1BlC,KAAKuB,eACJvB,KAAKM,eAEVqB,cACE3B,KAAKmC,oBACLnC,KAAKG,SAASiC,UAAUC,OAAO,2BAC/BrC,KAAKG,SAASQ,aAAa,cAAe,SAE5CY,cACEvB,KAAKG,SAASiC,UAAUE,IAAI,2BAC5BtC,KAAKG,SAASQ,aAAa,cAAe,QAE5CwB,oBAEE,IAAMI,EAAOvC,KAAKC,SAASuC,wBAC3B,MAAMC,EAAiB,CACrBC,IAAKH,EAAKG,IACVC,KAAMJ,EAAKI,KACXC,MAAOC,OAAOC,WAAaP,EAAKK,MAChCG,OAAQF,OAAOG,YAAcT,EAAKQ,QAGpC,IAAIE,EAAa,EACbC,EAAa,KACjBC,OAAOC,KAAKX,GAAgBY,IAAI,IAC1BZ,EAAea,GAAOL,IACxBA,EAAaR,EAAea,GAC5BJ,EAAaI,KAGjBtD,KAAKG,SAASoD,QAAQC,KAAON,GAAc,yBAIhCrD"}